<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style>
    rect {
        fill: lightblue;
        stroke: black;
    }
    path {stroke: black;}
</style>

<body onload='init()'>
    <svg width=300 height=300>
    </svg>
    <script>

        const _survivorColor = 'lightgreen';
        const _nonSurvivorColor = 'lightgray';

        async function init() {
            var data = await d3.csv('https://wingchanatibsa.github.io/cs498dv/titanic_dataset.csv');
            console.log(data);

            var nonSurvivorRate = 61.62;
            var survivorRate = 38.38;

            drawSurvivalRatePieChart(survivorRate, nonSurvivorRate);
            
        }

        function drawSurvivalRatePieChart(survivorRate, nonSurvivorRate) {
            var color = [_nonSurvivorColor, _survivorColor];
            var pie = d3.pie();
            var arc = d3.arc().innerRadius(0).outerRadius(100);

            var margin = 150;
            var svg = d3.select('svg');
            svg.append('g')
            .attr('transform', "translate(" + margin + "," + margin + ")")
                .selectAll('path')
                .data(pie([nonSurvivorRate, survivorRate]))
                .enter()
                .append('path')
                .attr('d', arc)
                .attr('fill', function(d, i){ return color[i]});
        }
    </script>
</body>

</html>